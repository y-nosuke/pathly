# Pathly MVP - ユーザーストーリー

## 1. GPS経路の自動記録・保存

### ユーザーストーリー
>
> **As a** お出掛けが好きな人  
> **I want** 外出中にGPS軌跡を自動的に記録してもらいたい  
> **So that** 手動操作なしで移動経路を残すことができる  

### 受け入れ基準 (Acceptance Criteria)

- [ ] アプリを起動すると、位置情報の許可を求める
- [ ] バックグラウンドでもGPS記録が継続される
- [ ] 30秒間隔でGPS座標を取得・保存する
- [ ] バッテリー消費を考慮したPRIORITY_BALANCED_POWER_ACCURACYを使用
- [ ] ローカルデータベースに軌跡データを保存する
- [ ] 記録開始・停止ボタンで手動制御できる

### タスク詳細

1. 位置情報権限の取得処理
2. GPS座標の定期取得サービス実装
3. バックグラウンド動作の実装
4. ローカルデータベース設計・実装
5. 記録制御UI実装

---

## 2. 記録したデータの基本的な一覧表示

### ユーザーストーリー
>
> **As a** お出掛けの記録を確認したい人  
> **I want** 過去の外出記録を日付順で一覧表示してほしい  
> **So that** いつ、どこに出掛けたかを簡単に振り返ることができる  

### 受け入れ基準 (Acceptance Criteria)

- [ ] 外出記録を日付順（新しい順）で一覧表示する
- [ ] 各記録に日付、開始時刻、終了時刻、総移動距離を表示する
- [ ] 記録がない場合は「記録がありません」メッセージを表示
- [ ] 一覧から個別の記録をタップして詳細を確認できる
- [ ] 記録の削除ができる

### タスク詳細

1. 履歴一覧画面のUI設計・実装
2. データベースから記録を取得するRepository実装
3. 日付フォーマット・表示ロジック実装
4. 個別記録詳細画面への遷移実装
5. 削除機能の実装

---

## 3. 地図上での軌跡表示

### ユーザーストーリー
>
> **As a** 移動経路を視覚的に確認したい人  
> **I want** Google Maps上に自分の移動軌跡を線で表示してほしい  
> **So that** どのルートを通ったかを地図上で確認できる  

### 受け入れ基準 (Acceptance Criteria)

- [ ] Google Maps SDKを使用して地図を表示する
- [ ] GPS座標データから軌跡を線（Polyline）として描画する
- [ ] 軌跡の色は視認しやすい色（青色など）を使用する
- [ ] 開始地点と終了地点にマーカーを表示する
- [ ] 地図の拡大・縮小・パン操作ができる
- [ ] 軌跡全体が見えるように地図の表示範囲を自動調整する

### タスク詳細

1. Google Maps SDK導入・設定
2. 地図表示画面の実装
3. GPS座標からPolyline生成ロジック実装
4. 開始・終了マーカーの実装
5. 地図の表示範囲自動調整機能

---

## 4. ローカルデータ保存

### ユーザーストーリー
>
> **As a** インターネット接続がない環境でもアプリを使いたい人  
> **I want** 記録したデータをデバイス内に保存してほしい  
> **So that** オフライン環境でも過去の記録を確認できる  

### 受け入れ基準 (Acceptance Criteria)

- [ ] GPS軌跡データをローカルデータベース（Room）に保存する
- [ ] データは暗号化して保存する（Android Encrypted SharedPreferences）
- [ ] インターネット接続がなくても記録・閲覧ができる
- [ ] アプリを再インストールしてもデータが失われない
- [ ] データベースのバージョン管理・マイグレーション機能がある

### タスク詳細

1. Room データベース設計・実装
2. データ暗号化機能の実装
3. データベースエンティティ・DAO実装
4. マイグレーション機能実装
5. オフライン動作テスト

---

## 📝 追加考慮事項

### パフォーマンス要件

- GPS取得間隔: 30秒
- バッテリー消費の最適化
- メモリ使用量の制限

### セキュリティ要件

- 位置情報の適切な権限管理
- ローカルデータの暗号化
- プライバシー配慮

### UI/UX要件

- シンプルで直感的な操作
- 大きなボタン設計
- エラー時の適切なフィードバック

## 📋 開発優先順位

1. **最優先**: ローカルデータ保存（基盤）
2. **高優先**: GPS経路の自動記録・保存（コア機能）
3. **中優先**: 記録したデータの基本的な一覧表示
4. **低優先**: 地図上での軌跡表示（Google Maps SDK依存）
