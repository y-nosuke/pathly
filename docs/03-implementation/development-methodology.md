# Pathly 開発進め方・文書化ルール

## 📋 ユーザーストーリー管理ルール

### **ファイル構成**

- **概要**: `user-stories/overview.md` にユーザーストーリー一覧表を記載
- **詳細**: アクティビティ別に分割したファイルに受け入れ基準付きで記載

### **アクティビティ別ファイル分割**

```text
user-stories/
├── overview.md                      # ユーザーストーリー一覧表
├── recording-stories.md             # 記録する
├── location-correction-stories.md   # 位置を補正する  
├── editing-stories.md               # 編集する
├── planning-stories.md              # 計画する
├── viewing-stories.md               # 確認する
├── management-stories.md            # 管理する
├── sharing-stories.md               # 共有する
├── platform-stories.md             # 利用する
├── operation-stories.md             # 操作する
└── settings-stories.md              # 設定する
```

### **ユーザーストーリー詳細の記載形式**

```markdown
## US001: [ストーリータイトル]

**As a** [ペルソナ]  
**I want** [機能/要求]  
**So that** [価値/理由]

### 受け入れ基準
- [ ] [具体的な条件1]
- [ ] [具体的な条件2]
- [ ] [具体的な条件3]

### 優先度
[高/中/低]

### 依存関係
- [依存する他の機能やストーリー]

---
```

## 🎯 ユースケース作成ルール

### **作成判断基準**

ユースケースを作成するのは以下の **すべての条件** を満たす場合のみ：

1. **優先度が高い** (MVP機能)
2. **複雑なフローがある** (単純なCRUD操作以外)
3. **技術的リスクが高い** または **外部システム連携がある**

### **作成対象外**

- 中・低優先度のユーザーストーリー
- 単純なCRUD操作
- UI/UX改善のみの機能
- 設定・管理系の機能

### **ファイル構成**

```text
use-cases/
├── overview.md              # ユースケース一覧
└── UC[番号]-[機能名].md     # 個別ユースケース
```

### **ユースケース記載形式**

```markdown
# UC001: [ユースケース名]

## 概要
[ユースケースの目的と概要]

## 対応するユーザーストーリー
- US001: [関連するユーザーストーリー]

## アクター
- [主要アクター]
- [副次アクター]

## 前提条件
- [前提条件1]
- [前提条件2]

## 正常フロー
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

## 代替フロー
### [代替ケース1]
1. [代替ステップ]

## 事後条件
- [成功時の状態]

## 例外処理
- [エラーケース1]
- [エラーケース2]
```

## 📚 文書管理の原則

### **段階的詳細化**

- **要件定義時**: ユーザーストーリー一覧 + 高優先度の詳細
- **設計時**: 重要ユースケース + API設計
- **実装時**: 必要に応じて詳細を追加

### **文書の更新タイミング**

- **ユーザーストーリー**: 要件変更時のみ更新
- **ユースケース**: 実装前に詳細化、実装後に実績反映
- **設計文書**: 実装時の変更を随時反映

### **文書の責任範囲**

- **ユーザーストーリー**: 何を作るか（WHAT）
- **ユースケース**: どう動くか（HOW - 機能面）
- **設計文書**: どう作るか（HOW - 技術面）

## 🔄 アジャイル開発での運用

### **最小限の文書化**

- 動くソフトウェアを包括的な文書よりも価値とする
- 文書は必要最小限に留め、コードとテストで仕様を表現

### **実装優先の原則**

- 詳細仕様は実装時に決定
- 不明な点は実装しながら検証
- 文書は後追いで更新

### **変更への対応**

- ユーザーストーリーの変更は要件変更として扱う
- 実装詳細の変更は文書更新不要
- 大きな設計変更時のみ文書を更新

## 📋 品質基準

### **ユーザーストーリーの品質**

- INVEST原則に従う（Independent, Negotiable, Valuable, Estimable, Small, Testable）
- 受け入れ基準は検証可能な形で記載
- ペルソナと価値を明確に定義

### **ユースケースの品質**

- 正常フローと主要な代替フローを網羅
- 技術的詳細ではなく機能的な振る舞いに焦点
- テストケース作成の基礎となる品質

### **文書の保守性**

- ファイル分割により並行作業を可能にする
- 関連する機能をまとめて管理
- 検索・参照しやすい構造を維持
